@page "/quizzes"

@using IKWYT.Data
@using Repository
@inject IQuizService QuizService

<h1><span class="material-icons">library_books</span>   Quizzes</h1>

<p>Pick a quiz to expand your brain!</p>

@if (quizzes == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <RadzenGrid @ref="grid" AllowFiltering="true" AllowPaging="true" PageSize="12" AllowSorting="true" Data="@quizzes" TItem="QuizMetaData">
        <Columns>
            <RadzenGridColumn TItem="QuizMetaData" Property="ExternalReference" Title="Quiz" >
                <Template Context="data">
                    @{ var name = "/quiz/" + @data.ExternalReference;
                        <NavLink href="@name">@data.Title</NavLink>
                    }
                </Template>
            </RadzenGridColumn>
            <RadzenGridColumn TItem="QuizMetaData" Property="Category" Title="Category" />
            <RadzenGridColumn TItem="QuizMetaData" Property="Difficulty" Title="Difficulty"/>
        </Columns>
    </RadzenGrid>
    }

@code {
    RadzenGrid<QuizMetaData> grid;
    private List<QuizMetaData> quizzes;

    protected override void OnInitialized()
    {
        quizzes = QuizService.GetQuizMetaData();
    }
}
